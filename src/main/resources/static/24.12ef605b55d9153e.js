"use strict";(self.webpackChunkamued_frontend=self.webpackChunkamued_frontend||[]).push([[24],{3024:(b,d,n)=>{n.r(d),n.d(d,{DashbordComponent:()=>g});var o=n(4341),l=n(177),e=n(4438),c=n(3076),m=n(1794);function u(i,h){if(1&i&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&i){const s=h.$implicit;e.Y8G("value",s.id),e.R7$(),e.JRh(s.session)}}let g=(()=>{class i{constructor(s,r){this.sessionService=s,this.memberService=r,this.stats={registeredMembers:0,completedPayments:0,pendingRegistrations:0,newRegistrations:0,renewalRegistrations:0},this.years=[]}ngOnInit(){this.loadSessions()}loadSessions(){this.sessionService.getYears().subscribe({next:s=>{if("OK"===s.status){this.years=s.data;const r=this.years.find(t=>t.currentYear);r&&(this.sessionId=r.id,this.reloadStat())}},error:()=>{console.error("Erreur lors de la r\xe9cup\xe9ration des ann\xe9es.")}})}reloadStat(){this.sessionId&&(this.getCurrentSessionStat(),this.getCompletedPayments(),this.getPendingRegistrations(),this.getNewRegistrations(),this.getRenewalRegistrations())}getCurrentSessionStat(){this.memberService.getRegistrationBySession(this.sessionId).subscribe({next:s=>{"OK"===s.status&&(this.stats.registeredMembers=s.data)},error:()=>{console.error("Erreur lors de la r\xe9cup\xe9ration des inscriptions.")}})}getCompletedPayments(){this.memberService.getPayedOrNoPayedSessionCountPeerSession(this.sessionId,!0).subscribe({next:s=>{"OK"===s.status&&(this.stats.completedPayments=s.data)},error:()=>{console.error("Erreur lors de la r\xe9cup\xe9ration des paiements.")}})}getPendingRegistrations(){this.memberService.getPayedOrNoPayedSessionCountPeerSession(this.sessionId,!1).subscribe({next:s=>{"OK"===s.status&&(this.stats.pendingRegistrations=s.data)},error:()=>{console.error("Erreur lors de la r\xe9cup\xe9ration des inscriptions en attente.")}})}getNewRegistrations(){this.memberService.getNewOrRenewalAdherentForASession(this.sessionId,"INITIAL").subscribe({next:s=>{"OK"===s.status&&(this.stats.newRegistrations=s.data)},error:()=>{console.error("Erreur lors de la r\xe9cup\xe9ration des inscriptions en attente.")}})}getRenewalRegistrations(){this.memberService.getNewOrRenewalAdherentForASession(this.sessionId,"REINSCRIPTION").subscribe({next:s=>{"OK"===s.status&&(this.stats.renewalRegistrations=s.data)},error:()=>{console.error("Erreur lors de la r\xe9cup\xe9ration des r\xe9inscriptions.")}})}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(c.m),e.rXU(m.G))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-list-contribution"]],standalone:!0,features:[e.aNF],decls:61,vars:7,consts:[[1,"container","my-5"],[1,"text-center","mb-4","display-5","fw-bold"],[1,"row","justify-content-center","mb-4"],[1,"col-md-4"],[1,"input-group"],["for","yearSelect",1,"input-group-text","bg-primary","text-white"],[1,"bi","bi-calendar"],["id","yearSelect",1,"form-select","shadow-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"row","g-4"],[1,"card","shadow-sm","border-0","hover-effect"],[1,"card-body","text-center","p-4"],[1,"bi","bi-people-fill","fs-1","text-primary","mb-3"],[1,"card-title","fw-bold","mb-2"],[1,"card-text","fs-3","fw-bold","text-dark"],[1,"text-muted"],[1,"bi","bi-cash-stack","fs-1","text-success","mb-3"],[1,"bi","bi-exclamation-triangle-fill","fs-1","text-danger","mb-3"],[1,"bi","bi-person-plus-fill","fs-1","text-info","mb-3"],[1,"bi","bi-arrow-repeat","fs-1","text-warning","mb-3"],[3,"value"]],template:function(r,t){1&r&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Tableau de Bord"),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e.nrm(7,"i",6),e.k0s(),e.j41(8,"select",7),e.mxI("ngModelChange",function(a){return e.DH7(t.sessionId,a)||(t.sessionId=a),a}),e.bIt("ngModelChange",function(){return t.reloadStat()}),e.DNE(9,u,2,2,"option",8),e.k0s()()()(),e.j41(10,"div",9)(11,"div",3)(12,"div",10)(13,"div",11),e.nrm(14,"i",12),e.j41(15,"h5",13),e.EFF(16,"Membres Inscrits"),e.k0s(),e.j41(17,"p",14),e.EFF(18),e.k0s(),e.j41(19,"small",15),e.EFF(20,"Total des membres inscrits"),e.k0s()()()(),e.j41(21,"div",3)(22,"div",10)(23,"div",11),e.nrm(24,"i",16),e.j41(25,"h5",13),e.EFF(26,"Paiements Compl\xe9t\xe9s"),e.k0s(),e.j41(27,"p",14),e.EFF(28),e.k0s(),e.j41(29,"small",15),e.EFF(30,"Paiements r\xe9ussis"),e.k0s()()()(),e.j41(31,"div",3)(32,"div",10)(33,"div",11),e.nrm(34,"i",17),e.j41(35,"h5",13),e.EFF(36,"Inscriptions en Attente"),e.k0s(),e.j41(37,"p",14),e.EFF(38),e.k0s(),e.j41(39,"small",15),e.EFF(40,"En attente de validation"),e.k0s()()()(),e.j41(41,"div",3)(42,"div",10)(43,"div",11),e.nrm(44,"i",18),e.j41(45,"h5",13),e.EFF(46,"Nouveaux Adh\xe9rents"),e.k0s(),e.j41(47,"p",14),e.EFF(48),e.k0s(),e.j41(49,"small",15),e.EFF(50,"Nouveaux membres inscrits"),e.k0s()()()(),e.j41(51,"div",3)(52,"div",10)(53,"div",11),e.nrm(54,"i",19),e.j41(55,"h5",13),e.EFF(56,"R\xe9inscriptions"),e.k0s(),e.j41(57,"p",14),e.EFF(58),e.k0s(),e.j41(59,"small",15),e.EFF(60,"R\xe9inscriptions r\xe9ussies"),e.k0s()()()()()()),2&r&&(e.R7$(8),e.R50("ngModel",t.sessionId),e.R7$(),e.Y8G("ngForOf",t.years),e.R7$(9),e.JRh(t.stats.registeredMembers||0),e.R7$(10),e.JRh(t.stats.completedPayments||0),e.R7$(10),e.JRh(t.stats.pendingRegistrations||0),e.R7$(10),e.JRh(t.stats.newRegistrations||0),e.R7$(10),e.JRh(t.stats.renewalRegistrations||0))},dependencies:[l.Sq,o.YN,o.xH,o.y7,o.wz,o.BC,o.vS],styles:[".hover-effect[_ngcontent-%COMP%]{transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}.hover-effect[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #00000026}.card[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden}.input-group-text[_ngcontent-%COMP%]{border-radius:8px 0 0 8px}.form-select[_ngcontent-%COMP%]{border-radius:0 8px 8px 0}.text-success[_ngcontent-%COMP%]{color:#198754!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}"]})}}return i})()}}]);